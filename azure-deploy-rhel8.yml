---
- hosts: all
  gather_facts: false

  tasks:
    - name: Create VM with defaults
      delegate_to: localhost
      azure_rm_virtualmachine:
        vm_size: "{{ my_vm_size }}"
        resource_group: "{{ myresourcegroup }}"
        name: "{{ vm_name }}"
        admin_username: "{{ admin_username }}"
        admin_password: "{{ ssh_pub_key }}"
        tags:
          worker: ""
        image:
          offer: RHEL
          publisher: RedHat
          sku: '8.1'
          version: latest
